EESchema Schematic File Version 4
LIBS:fan-controller-cache
EELAYER 30 0
EELAYER END
$Descr A 11000 8500
encoding utf-8
Sheet 1 1
Title "ATtiny13A PWM Fan Controller"
Date "2019-12-20"
Rev "1"
Comp "D Cooper Dalrymple"
Comment1 "https://github.com/dcooperdalrymple/fan-controller"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L fan-controller:L4931-5.0 U1
U 1 1 5DFD92E3
P 2800 2450
F 0 "U1" H 2800 2692 50  0000 C CNN
F 1 "L4931-5.0" H 2800 2601 50  0000 C CNN
F 2 "" H 2800 2450 50  0001 C CNN
F 3 "" H 2800 2450 50  0001 C CNN
	1    2800 2450
	1    0    0    -1  
$EndComp
$Comp
L Connector:Screw_Terminal_01x03 J1
U 1 1 5DFDA558
P 1350 2450
F 0 "J1" H 1268 2675 50  0000 C CNN
F 1 "Screw Terminal" H 1268 2676 50  0001 C CNN
F 2 "" H 1350 2450 50  0001 C CNN
F 3 "~" H 1350 2450 50  0001 C CNN
	1    1350 2450
	-1   0    0    -1  
$EndComp
$Comp
L Device:R_POT_US RV1
U 1 1 5DFDC441
P 6600 5750
F 0 "RV1" H 6532 5796 50  0000 R CNN
F 1 "10k" H 6532 5705 50  0000 R CNN
F 2 "" H 6600 5750 50  0001 C CNN
F 3 "~" H 6600 5750 50  0001 C CNN
	1    6600 5750
	-1   0    0    -1  
$EndComp
$Comp
L Device:R_US R1
U 1 1 5DFDCCCF
P 6100 5050
F 0 "R1" V 6305 5050 50  0000 C CNN
F 1 "1k" V 6214 5050 50  0000 C CNN
F 2 "" V 6140 5040 50  0001 C CNN
F 3 "~" H 6100 5050 50  0001 C CNN
	1    6100 5050
	0    -1   -1   0   
$EndComp
$Comp
L Device:CP C1
U 1 1 5DFDD767
P 2350 2800
F 0 "C1" H 2468 2846 50  0000 L CNN
F 1 "10uF" H 2468 2755 50  0000 L CNN
F 2 "" H 2388 2650 50  0001 C CNN
F 3 "~" H 2350 2800 50  0001 C CNN
	1    2350 2800
	1    0    0    -1  
$EndComp
$Comp
L Device:CP C2
U 1 1 5DFDDADD
P 3250 2800
F 0 "C2" H 3368 2846 50  0000 L CNN
F 1 "10uF" H 3368 2755 50  0000 L CNN
F 2 "" H 3288 2650 50  0001 C CNN
F 3 "~" H 3250 2800 50  0001 C CNN
	1    3250 2800
	1    0    0    -1  
$EndComp
$Comp
L Device:CP C3
U 1 1 5DFDDF84
P 1950 5550
F 0 "C3" H 2068 5596 50  0000 L CNN
F 1 "22uF" H 2068 5505 50  0000 L CNN
F 2 "" H 1988 5400 50  0001 C CNN
F 3 "~" H 1950 5550 50  0001 C CNN
	1    1950 5550
	1    0    0    -1  
$EndComp
$Comp
L Device:C C4
U 1 1 5DFDE5CB
P 2450 5550
F 0 "C4" H 2565 5596 50  0000 L CNN
F 1 "0.1uF" H 2565 5505 50  0000 L CNN
F 2 "" H 2488 5400 50  0001 C CNN
F 3 "~" H 2450 5550 50  0001 C CNN
	1    2450 5550
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR?
U 1 1 5DFDECFD
P 2050 2100
F 0 "#PWR?" H 2050 1950 50  0001 C CNN
F 1 "+12V" H 2065 2273 50  0000 C CNN
F 2 "" H 2050 2100 50  0001 C CNN
F 3 "" H 2050 2100 50  0001 C CNN
	1    2050 2100
	1    0    0    -1  
$EndComp
$Comp
L power:+5V #PWR?
U 1 1 5DFDF441
P 3550 2100
F 0 "#PWR?" H 3550 1950 50  0001 C CNN
F 1 "+5V" H 3565 2273 50  0000 C CNN
F 2 "" H 3550 2100 50  0001 C CNN
F 3 "" H 3550 2100 50  0001 C CNN
	1    3550 2100
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5DFDFC8E
P 2050 3150
F 0 "#PWR?" H 2050 2900 50  0001 C CNN
F 1 "GND" H 2055 2977 50  0000 C CNN
F 2 "" H 2050 3150 50  0001 C CNN
F 3 "" H 2050 3150 50  0001 C CNN
	1    2050 3150
	1    0    0    -1  
$EndComp
Wire Wire Line
	1550 2450 2050 2450
Wire Wire Line
	1550 2550 2050 2550
Connection ~ 2050 3050
Wire Wire Line
	2050 3050 2050 3150
Wire Wire Line
	2050 2450 2050 2100
Connection ~ 2050 2450
Wire Wire Line
	2050 2450 2350 2450
Wire Wire Line
	2050 2550 2050 3050
Wire Wire Line
	3100 2450 3250 2450
Wire Wire Line
	3250 2450 3250 2650
Wire Wire Line
	3250 2950 3250 3050
Wire Wire Line
	2050 3050 2350 3050
Wire Wire Line
	2800 2750 2800 3050
Connection ~ 2800 3050
Wire Wire Line
	2800 3050 3250 3050
Wire Wire Line
	2350 2450 2350 2650
Connection ~ 2350 2450
Wire Wire Line
	2350 2450 2500 2450
Wire Wire Line
	2350 2950 2350 3050
Connection ~ 2350 3050
Wire Wire Line
	2350 3050 2800 3050
Wire Wire Line
	3550 2100 3550 2450
Wire Wire Line
	3550 2450 3250 2450
Connection ~ 3250 2450
$Comp
L power:+5V #PWR?
U 1 1 5DFEAAD1
P 1700 2350
F 0 "#PWR?" H 1700 2200 50  0001 C CNN
F 1 "+5V" V 1715 2478 50  0000 L CNN
F 2 "" H 1700 2350 50  0001 C CNN
F 3 "" H 1700 2350 50  0001 C CNN
	1    1700 2350
	0    1    1    0   
$EndComp
Wire Wire Line
	1700 2350 1550 2350
$Comp
L power:+5V #PWR?
U 1 1 5DFEE14D
P 5150 4450
F 0 "#PWR?" H 5150 4300 50  0001 C CNN
F 1 "+5V" H 5165 4623 50  0000 C CNN
F 2 "" H 5150 4450 50  0001 C CNN
F 3 "" H 5150 4450 50  0001 C CNN
	1    5150 4450
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5DFEE8BD
P 5150 6150
F 0 "#PWR?" H 5150 5900 50  0001 C CNN
F 1 "GND" H 5155 5977 50  0000 C CNN
F 2 "" H 5150 6150 50  0001 C CNN
F 3 "" H 5150 6150 50  0001 C CNN
	1    5150 6150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2450 5700 2450 5800
Wire Wire Line
	1950 5700 1950 5800
$Comp
L power:+5V #PWR?
U 1 1 5DFF2D01
P 2200 5150
F 0 "#PWR?" H 2200 5000 50  0001 C CNN
F 1 "+5V" H 2215 5323 50  0000 C CNN
F 2 "" H 2200 5150 50  0001 C CNN
F 3 "" H 2200 5150 50  0001 C CNN
	1    2200 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2200 5150 2200 5300
Wire Wire Line
	2450 5300 2450 5400
Wire Wire Line
	1950 5300 1950 5400
Wire Wire Line
	5150 5850 5150 6150
Wire Wire Line
	1950 5800 2200 5800
Connection ~ 2200 5300
Wire Wire Line
	2200 5300 2450 5300
Wire Wire Line
	1950 5300 2200 5300
$Comp
L power:GND #PWR?
U 1 1 5DFFA21D
P 2200 6000
F 0 "#PWR?" H 2200 5750 50  0001 C CNN
F 1 "GND" H 2205 5827 50  0000 C CNN
F 2 "" H 2200 6000 50  0001 C CNN
F 3 "" H 2200 6000 50  0001 C CNN
	1    2200 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	2200 6000 2200 5800
Connection ~ 2200 5800
Wire Wire Line
	2200 5800 2450 5800
$Comp
L power:GND #PWR?
U 1 1 5E00239E
P 6600 6100
F 0 "#PWR?" H 6600 5850 50  0001 C CNN
F 1 "GND" H 6605 5927 50  0000 C CNN
F 2 "" H 6600 6100 50  0001 C CNN
F 3 "" H 6600 6100 50  0001 C CNN
	1    6600 6100
	1    0    0    -1  
$EndComp
Wire Wire Line
	6300 5750 6450 5750
$Comp
L power:+5V #PWR?
U 1 1 5E00568A
P 6600 5400
F 0 "#PWR?" H 6600 5250 50  0001 C CNN
F 1 "+5V" H 6615 5573 50  0000 C CNN
F 2 "" H 6600 5400 50  0001 C CNN
F 3 "" H 6600 5400 50  0001 C CNN
	1    6600 5400
	1    0    0    -1  
$EndComp
Wire Wire Line
	6300 5150 6300 5750
Wire Wire Line
	6600 5900 6600 6000
Wire Wire Line
	6600 5400 6600 5500
Wire Wire Line
	5750 5150 6300 5150
Connection ~ 6300 5750
Wire Wire Line
	5150 4650 5150 4450
$Comp
L Connector:Screw_Terminal_01x03 J2
U 1 1 5DFD9DA1
P 5900 5750
F 0 "J2" H 5818 5975 50  0000 C CNN
F 1 "Screw Terminal" H 5818 5976 50  0001 C CNN
F 2 "" H 5900 5750 50  0001 C CNN
F 3 "~" H 5900 5750 50  0001 C CNN
	1    5900 5750
	-1   0    0    -1  
$EndComp
$Comp
L MCU_Microchip_ATtiny:ATtiny13A-PU U2
U 1 1 5DFCE29E
P 5150 5250
F 0 "U2" H 4621 5296 50  0000 R CNN
F 1 "ATtiny13A-PU" H 4621 5205 50  0000 R CNN
F 2 "Package_DIP:DIP-8_W7.62mm" H 5150 5250 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/doc8126.pdf" H 5150 5250 50  0001 C CNN
	1    5150 5250
	1    0    0    -1  
$EndComp
Wire Wire Line
	6100 5750 6300 5750
Wire Wire Line
	6100 5650 6200 5650
Wire Wire Line
	6200 5650 6200 5500
Wire Wire Line
	6200 5500 6600 5500
Connection ~ 6600 5500
Wire Wire Line
	6600 5500 6600 5600
Wire Wire Line
	6100 5850 6200 5850
Wire Wire Line
	6200 5850 6200 6000
Wire Wire Line
	6200 6000 6600 6000
Connection ~ 6600 6000
Wire Wire Line
	6600 6000 6600 6100
$Comp
L power:+12V #PWR?
U 1 1 5E017987
P 5300 2200
F 0 "#PWR?" H 5300 2050 50  0001 C CNN
F 1 "+12V" H 5315 2373 50  0000 C CNN
F 2 "" H 5300 2200 50  0001 C CNN
F 3 "" H 5300 2200 50  0001 C CNN
	1    5300 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	5300 2200 5300 2400
$Comp
L power:GND #PWR?
U 1 1 5E019014
P 5300 3100
F 0 "#PWR?" H 5300 2850 50  0001 C CNN
F 1 "GND" H 5305 2927 50  0000 C CNN
F 2 "" H 5300 3100 50  0001 C CNN
F 3 "" H 5300 3100 50  0001 C CNN
	1    5300 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	5300 2900 5300 3100
Text Notes 1300 1500 0    100  ~ 20
Power Regulation
Text Notes 3500 4100 0    100  ~ 20
MCU Fan Controller
Text Notes 1900 4800 0    50   ~ 10
MCU Decoupling
$Comp
L Motor:Fan_4pin M2
U 1 1 5DFD0BC5
P 5300 2700
F 0 "M2" H 5458 2796 50  0000 L CNN
F 1 "4-Pin PWM Fan" H 5458 2705 50  0000 L CNN
F 2 "" H 5300 2710 50  0001 C CNN
F 3 "http://www.formfactors.org/developer%5Cspecs%5Crev1_2_public.pdf" H 5300 2710 50  0001 C CNN
	1    5300 2700
	1    0    0    -1  
$EndComp
$Comp
L Motor:Fan M2
U 1 1 5DFD6F37
P 7700 2500
F 0 "M2" H 7858 2596 50  0000 L CNN
F 1 "3-Pin Fan" H 7858 2505 50  0000 L CNN
F 2 "" H 7700 2510 50  0001 C CNN
F 3 "~" H 7700 2510 50  0001 C CNN
	1    7700 2500
	1    0    0    -1  
$EndComp
$Comp
L Diode:1N4007 D1
U 1 1 5DFD895F
P 7150 2450
F 0 "D1" V 7104 2529 50  0000 L CNN
F 1 "1N4007" V 7195 2529 50  0000 L CNN
F 2 "Diode_THT:D_DO-41_SOD81_P10.16mm_Horizontal" H 7150 2275 50  0001 C CNN
F 3 "http://www.vishay.com/docs/88503/1n4001.pdf" H 7150 2450 50  0001 C CNN
	1    7150 2450
	0    1    1    0   
$EndComp
Wire Wire Line
	7700 2100 7700 2200
Wire Wire Line
	7700 2700 7700 2800
Wire Wire Line
	7150 2300 7150 2100
Wire Wire Line
	7150 2100 7700 2100
Wire Wire Line
	7150 2600 7150 2800
Wire Wire Line
	7150 2800 7700 2800
Text Label 6500 5050 2    50   ~ 0
PWM
Wire Wire Line
	5000 2800 4600 2800
Text Label 4600 2800 0    50   ~ 0
PWM
Wire Wire Line
	5950 5050 5750 5050
Wire Wire Line
	6250 5050 6500 5050
$Comp
L power:+12V #PWR?
U 1 1 5DFF248E
P 7700 1900
F 0 "#PWR?" H 7700 1750 50  0001 C CNN
F 1 "+12V" H 7715 2073 50  0000 C CNN
F 2 "" H 7700 1900 50  0001 C CNN
F 3 "" H 7700 1900 50  0001 C CNN
	1    7700 1900
	1    0    0    -1  
$EndComp
Wire Wire Line
	7700 1900 7700 2100
Connection ~ 7700 2100
$Comp
L Transistor_BJT:PN2222A Q?
U 1 1 5DFF654C
P 7600 3150
F 0 "Q?" H 7790 3196 50  0000 L CNN
F 1 "PN2222A" H 7790 3105 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 7800 3075 50  0001 L CIN
F 3 "http://www.fairchildsemi.com/ds/PN/PN2222A.pdf" H 7600 3150 50  0001 L CNN
	1    7600 3150
	1    0    0    -1  
$EndComp
Wire Wire Line
	7700 2800 7700 2950
Connection ~ 7700 2800
$Comp
L power:GND #PWR?
U 1 1 5DFF9E7F
P 7700 3500
F 0 "#PWR?" H 7700 3250 50  0001 C CNN
F 1 "GND" H 7705 3327 50  0000 C CNN
F 2 "" H 7700 3500 50  0001 C CNN
F 3 "" H 7700 3500 50  0001 C CNN
	1    7700 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	7700 3350 7700 3500
Wire Wire Line
	7400 3150 7000 3150
Text Label 7000 3150 0    50   ~ 0
PWM
Text Notes 4300 1500 0    100  ~ 20
4-Pin PWM Fan
Text Notes 6750 1500 0    100  ~ 20
3-Pin Voltage-Controlled Fan
$EndSCHEMATC
